Higgs Boson Machine Learning Challenge
========================================================

The goal of this challenge is to identify which simulated ATLAS experiment proton-proton collision
observations contain evidence of boson pairs ("signal"), and which do not ("background"). 

The challenge is [hosted by Kaggle](http://www.kaggle.com/c/higgs-boson) and provided by [The Atlas Experiment](http://atlas.ch/).  Technical details are found in the [Laboratoire de l’Accélerateur Linéaire](http://higgsml.lal.in2p3.fr/) technical documentation [PDF](http://higgsml.lal.in2p3.fr/files/2014/04/documentation_v1.5.pdf)

# The Data

Provided were a training set of 250,000 observations and a test set of 500,000 observations.
Unusable or unknown quantities are reported as -999.0.

The variables include 17 "primitive" quantities and 13 "derived" quantities. Also included
is the EventId identifying the observation. The training set also includes the goal label (b or s)
and a "Weight" metric not to be used in classification. For this reason I've stripped it out 
of the training set and saved a new CSV as processed_train.csv

## The Variables
```{r load_data, cache=TRUE}
    train <- read.csv("data/processed/processed_train.csv")
    names(train)
    signal <- which(train$Label=="s")
```
```{r load_libraries}
    require(ggplot2)
```
```{r plot_function}
    create_plot <- function(data, v) {
        p <- ggplot(data, aes(x=EventId, y=data[,v], color=Label), environment=environment())
        l <- p + labs(y=v)
        print(l + geom_point())
    }
```


### Primitive Variables

**PRI_tau_pt**

The transverse momentum $\sqrt{p^2_x+p^2_y}$, or the momentum perpendicular to the beam line, of the hadronic tau measured in GeV

```{r pri_tau_pt_fig, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_tau_pt")
```
```{r pri_tau_pt}
    ptp <- train$PRI_tau_pt
    summary(ptp)
```
Most observations are < 175 GeV, let's replot on that subset
```{r subset_ptp_175, fig.width=8, cache=TRUE}
    ptp.175 <- subset(train, PRI_tau_pt < 175)
    create_plot(ptp.175, "PRI_tau_pt")
```
It looks like the slower the transverse momentum, the more likely the observation is background noise. Let's replot for < 50
```{r subset_ptp_50, fig.width=8, cache=TRUE}
    ptp.50 <- subset(train, PRI_tau_pt < 50)
    create_plot(ptp.50, "PRI_tau_pt")
```
**PRI_tau_eta**

The pseudorapidity η (the angle from the beam axis) of the hadronic tau.

```{r pri_tau_eta_fig, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_tau_eta")
```
It looks like a higher quantity of signal observations exist within -1.5 to 1.5 than outside this range.
```{r pri_tau_eta_in_range}
    signal.obs <- subset(train, Label == "s", select = PRI_tau_eta)
    # quantity signal in range -1.5 to 1.5
    in.range <- subset(signal.obs, PRI_tau_eta >= -1.5 & PRI_tau_eta <= 1.5)
    nrow(in.range)/nrow(signal.obs)
```
Almost 80% of signal observations fall in the -1.5 to 1.5 range. Is it also more likely that an
observation outside of this range is background?
```{r pri_tau_eta_out_range}
    outside.range <- subset(train, PRI_tau_eta < -1.5 | PRI_tau_eta > 1.5, select=Label)
    table(outside.range)
    length(which(outside.range=="b"))/nrow(outside.range)
```
About 74% of observations outside the range -1.5 to 1.5 are background noise.

**PRI_tau_phi**

The azimuthal angle φ, from -pi to pi in the spherical coordinate system, of the hadronic tau 
around the beam axis.

```{r pri_tau_phi_fig, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_tau_phi")
```
```{r pri_tau_phi}
    # all observations
    summary(train$PRI_tau_phi)
    # just the signal
    summary(train[signal,"PRI_tau_phi"])
    # just the background
    summary(train[-signal,"PRI_tau_phi"])
```
**PRI_lep_pt**

The transverse momentum $\sqrt{p^2_x+p^2_y}$, or the momentum perpendicular to the beam line, of the lepton (electron or muon) measured in GeV

```{r pri_lep_pt_fig, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_lep_pt")
```
Replotting to < 200
```{r pri_lep_pt_200, fig.width=8, cache=TRUE}
    plp.200 <- subset(train, PRI_lep_pt < 200)
    create_plot(plp.200, "PRI_lep_pt")
```
```{r pri_lep_pt}
    summary(train$PRI_lep_pt)
```
**PRI_lep_eta**

The pseudorapidity η (the angle from the beam axis) of the lepton.

```{r pri_lep_eta_fig, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_lep_eta")
```
Just as with the pseudorapidity of the hadronic tau it appears the signal
clusters in the range of -1.5 to 1.5
```{r pri_lep_eta_in_range}
    signal.obs <- subset(train, Label == "s", select = PRI_lep_eta)
    # quantity signal in range -1.5 to 1.5
    in.range <- subset(signal.obs, PRI_lep_eta >= -1.5 & PRI_lep_eta <= 1.5)
    nrow(in.range)/nrow(signal.obs)
```
Aabout 78% of signal observations fall in the -1.5 to 1.5 range. 

```{r pri_lep_eta_out_range}
    outside.range <- subset(train, PRI_lep_eta < -1.5 | PRI_lep_eta > 1.5, select=Label)
    table(outside.range)
    length(which(outside.range=="b"))/nrow(outside.range)
```
About 75% of observations outside the range -1.5 to 1.5 are background noise.

**PRI_lep_phi**

The azimuthal angle φ, from -pi to pi in the spherical coordinate system, of the lepton 
around the beam axis.

```{r pri_lep_phi_fig, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_lep_phi")
```
```{r pri_lep_phi}
        # all observations
    summary(train$PRI_lep_phi)
    # just the signal
    summary(train[signal,"PRI_lep_phi"])
    # just the background
    summary(train[-signal,"PRI_lep_phi"])
```
**PRI_met**
The missing transverse energy $\overrightarrow{E}^{miss}_T$ 

```{r pri_met, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_met")
```
```{r pri_met_summary}
    summary(train$PRI_met)
    # just the signal
    summary(train[signal,"PRI_met"])
    # just the background
    summary(train[-signal,"PRI_met"])
```
That one outlier really makes this blurry...
```{r pri_met_500, fig.width=8, cache=TRUE}
    pm.500 <- subset(train, PRI_met < 500)
    create_plot(pm.500, "PRI_met")
```
```{r pri_met_200, fig.width=8, cache=TRUE}
    pm.200 <- subset(train, PRI_met < 200)
    create_plot(pm.200, "PRI_met")
```
```{r pri_met_100, fig.width=8, cache=TRUE}
    pm.100 <- subset(train, PRI_met < 100)
    create_plot(pm.100, "PRI_met")
```
There appears to be a lot of signal clustered < 25
```{r pri_met_signal_25}
    under.25 <- subset(train[signal,], PRI_met < 25)
    nrow(under.25)/length(signal)
```
About 38% of the signal is < 25 

**PRI_met_phi**

The azimuth angle φ of the missing transverse energy.

```{r pri_met_phi, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_met_phi")
```
```{r pri_met_phi_summary}
    summary(train$PRI_met_phi)
    # just the signal
    summary(train[signal,"PRI_met_phi"])
    # just the background
    summary(train[-signal,"PRI_met_phi"])
```

**PRI_met_sumet**

The total transverse energy in the detector.
```{r pri_met_sumet, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_met_sumet")
```
```{r pri_met_sumet_summary}
    summary(train$PRI_met_sumet)
    # just the signal
    summary(train[signal,"PRI_met_sumet"])
    # just the background
    summary(train[-signal,"PRI_met_sumet"])
```
```{r pri_met_sumet_750, fig.width=8, cache=TRUE}
    pms.750 <- subset(train, PRI_met_sumet < 750)
    create_plot(pms.750, "PRI_met_sumet")
```
```{r pri_met_sumet_300, fig.width=8, cache=TRUE}
    pms.300 <- subset(train, PRI_met_sumet < 300)
    create_plot(pms.300, "PRI_met_sumet")
```
```{r pri_met_sumet_200, fig.width=8, cache=TRUE}
    pms.200 <- subset(train, PRI_met_sumet < 200)
    create_plot(pms.200, "PRI_met_sumet")
```
**PRI_jet_num**

The number of jets (a narrow cone of hadrons and other particles produced by the 
hadronization of a quark or gluon)
http://en.wikipedia.org/wiki/Jet_(particle_physics)

```{r pri_jet_num, fig.width=8, cache=TRUE}
    ggplot(data=train, aes(x=PRI_jet_num, fill=Label)) + geom_bar(position=position_dodge())
```
**PRI_jet_leading_pt** 
The transverse momentum $\sqrt{p^2_x+p^2_y}$ of the leading jet, that is the jet with
largest transverse momentum (undeﬁned if PRI jet num = 0).

```{r pri_jet_leading_pt, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_jet_leading_pt")
```
```{r pri_jet_leading_pt_na}
    pjlp.na <- subset(train, PRI_jet_leading_pt == -999.0, select=Label)
    table(pjlp.na)
    length(which(pjlp.na=="b"))/nrow(pjlp.na)
```
75% of undefined are background.
```{r pri_jet_leading_pt_defined, fig.width=8, cache=TRUE}
    pjlp <- subset(train, PRI_jet_leading_pt != -999.0)
    create_plot(pjlp, "PRI_jet_leading_pt")
```
```{r pri_jet_leading_pt_summary}
    summary(pjlp$PRI_jet_leading_pt)
    pjlp.signal <- which(pjlp$Label=="s")
    # just the signal
    summary(pjlp[pjlp.signal,"PRI_jet_leading_pt"])
    # just the background
    summary(pjlp[-pjlp.signal,"PRI_jet_leading_pt"])
```
**PRI_jet_leading_eta**

The pseudorapidity η of the leading jet (undeﬁned if PRI jet num = 0).

```{r pri_jet_leading_eta, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_jet_leading_eta")
```
```{r pri_jet_leading_eta_na}
    pjle.na <- subset(train, PRI_jet_leading_eta == -999.0, select=Label)
    table(pjle.na)
    length(which(pjle.na=="b"))/nrow(pjle.na)
```
74% of undefined are background.
```{r pri_jet_leading_eta_defined, fig.width=8, cache=TRUE}
    pjle <- subset(train, PRI_jet_leading_eta != -999.0)
    v <- "PRI_jet_leading_eta"
    p <- ggplot(pjle, aes(x=EventId, y=pjle[,v], color=Label), environment=environment())
    l <- p + labs(y=v)
    print(l + geom_point() + geom_hline(yintercept=c(-1.5,1.5)))
```
```{r pjle_background_in_range}
    pjle.inrange <- which(pjle$PRI_jet_leading_eta >= -1.5 & pjle$PRI_jet_leading_eta <= 1.5)
    table(pjle[pjle.inrange,"Label"])
    nrow(subset(pjle[pjle.inrange,],Label=="b"))/length(pjle.inrange)
```
67% of defined observations in the -1.5 to 1.5 range are background

What percentange of defined observations outside the -1.5 to 1.5 range are signal?
```{r pjle_signal_out_range}
    out.range <- subset(pjle, PRI_jet_leading_eta < -1.5 | PRI_jet_leading_eta > 1.5, select="Label")
    table(out.range)
```
```{r pri_jet_leading_eta_summary}
    summary(pjle$PRI_jet_leading_eta)
    pjle.signal <- which(pjle$Label=="s")
    # just the signal
    summary(pjle[pjle.signal,"PRI_jet_leading_eta"])
    # just the background
    summary(pjle[-pjle.signal,"PRI_jet_leading_eta"])
```
**PRI_jet_leading_phi**

The azimuth angle φ of the leading jet (undeﬁned if PRI jet num = 0).

```{r pri_jet_leading_phi, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_jet_leading_phi")
```
```{r pri_jet_leading_phi_na}
    pjlphi.na <- subset(train, PRI_jet_leading_phi == -999.0, select=Label)
    table(pjlphi.na)
    length(which(pjlphi.na=="b"))/nrow(pjlphi.na)
```
75% of undefined are background
```{r pri_jet_leading_phi_defined, fig.width=8, cache=TRUE}
    pjlphi <- subset(train, PRI_jet_leading_phi != -999.0)
    create_plot(pjlphi, "PRI_jet_leading_phi")
```
```{r pri_jet_leading_phi_summary}
    summary(pjlphi$PRI_jet_leading_phi)
    pjlphi.signal <- which(pjlphi$Label=="s")
    # just the signal
    summary(pjlphi[pjlphi.signal,"PRI_jet_leading_phi"])
    # just the background
    summary(pjlphi[-pjlphi.signal,"PRI_jet_leading_phi"])
```
**PRI_jet_subleading_pt**

The transverse momentum $\sqrt{p^2_x+p^2_y}$ of the second leading jet. 
 (undeﬁned if PRI jet num ≤ 1).
 
```{r pri_jet_subleading_pt, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_jet_subleading_pt")
```
```{r pri_jet_subleading_pt_na}
    pjsp.na <- subset(train, PRI_jet_subleading_pt == -999.0, select=Label)
    table(pjsp.na)
    length(which(pjsp.na=="b"))/nrow(pjsp.na)
```
70% of undefined are background
```{r pri_jet_subleading_pt_defined, fig.width=8, cache=TRUE}
    pjsp <- subset(train, PRI_jet_subleading_pt != -999.0)
    create_plot(pjsp, "PRI_jet_subleading_pt")
```
```{r pri_jet_subleading_pt_summary}
    summary(pjsp$PRI_jet_subleading_pt)
    pjsp.signal <- which(pjsp$Label=="s")
    # just the signal
    summary(pjsp[pjsp.signal,"PRI_jet_subleading_pt"])
    # just the background
    summary(pjsp[-pjsp.signal,"PRI_jet_subleading_pt"])
```
**PRI_jet_subleading_phi**

The azimuth angle φ of the subleading jet (undeﬁned if PRI jet num ≤ 1).
```{r pri_jet_subleading_phi, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_jet_subleading_phi")
```
```{r pri_jet_subleading_phi_na}
    pjsphi.na <- subset(train, PRI_jet_subleading_phi == -999.0, select=Label)
    table(pjsphi.na)
    length(which(pjsphi.na=="b"))/nrow(pjsphi.na)
```
70% of undefined are background
```{r pri_jet_subleading_phi_defined, fig.width=8, cache=TRUE}
    pjsphi <- subset(train, PRI_jet_subleading_phi != -999.0)
    create_plot(pjsphi, "PRI_jet_subleading_phi")
```
```{r pri_jet_subleading_phi_summary}
    summary(pjsphi$PRI_jet_subleading_phi)
    pjsphi.signal <- which(pjsphi$Label=="s")
    # just the signal
    summary(pjsphi[pjsphi.signal,"PRI_jet_subleading_phi"])
    # just the background
    summary(pjsphi[-pjsphi.signal,"PRI_jet_subleading_phi"])
```
**PRI_jet_all_pt** 

The scalar sum of the transverse momentum of all the jets.
```{r pri_jet_all_pt, fig.width=8, cache=TRUE}
    create_plot(train, "PRI_jet_all_pt")
```
```{r pri_jet_all_pt_500, fig.width=8, cache=TRUE}
    pjap.500 <- subset(train, PRI_jet_all_pt < 500)
    create_plot(pjap.500, "PRI_jet_all_pt")
```
```{r pri_jet_all_pt_300, fig.width=8, cache=TRUE}
    pjap.300 <- subset(train, PRI_jet_all_pt < 300)
    create_plot(pjap.300, "PRI_jet_all_pt")
```
```{r pri_jet_all_pt_summary}
    summary(train$PRI_jet_all_pt)
    # just the signal
    summary(train[signal,"PRI_jet_all_pt"])
    # just the background
    summary(train[-signal,"PRI_jet_all_pt"])
```
### Derived Variables